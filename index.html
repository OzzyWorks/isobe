<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>境界線のマリーナ - 磯辺高サスペンス</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { background-color: #000; margin: 0; color: white; overflow: hidden; font-family: sans-serif; }
        .fade-in { animation: fadeIn 0.8s ease-in forwards; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .choice-btn { transition: all 0.3s; border: 1px solid #555; background: rgba(255,255,255,0.1); }
        .choice-btn:hover { background: rgba(0, 74, 124, 0.8); border-color: #00c3ff; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- シナリオデータ ---
        const SCENARIO = {
            start: {
                name: "ナレーション",
                text: "2月、千葉市美浜区。磯辺高校を吹き抜ける風は、暴力的なほどに冷たい。君はヨットハーバーに立っていた。",
                image: "https://images.unsplash.com/photo-1516939884455-1445c8652f83?auto=format&fit=crop&q=80&w=1200",
                next: "scene1"
            },
            scene1: {
                name: "新聞部・ハル",
                text: "「ねえ、聞いた？ 第3桟橋にまた『片方のローファー』が置かれてたんだって。不気味だと思わない？」",
                image: "https://images.unsplash.com/photo-1529665253569-6d01c0eaf7b6?auto=format&fit=crop&q=80&w=400",
                choices: [
                    { text: "「詳しく調べてみよう」", next: "investigate" },
                    { text: "「関わらないほうがいい」", next: "ignore" }
                ]
            },
            investigate: {
                name: "ハル",
                text: "「やっぱりそう言うと思った。行こう、マリーナの奥に何かあるはずよ」",
                image: "https://images.unsplash.com/photo-1516939884455-1445c8652f83?auto=format&fit=crop&q=80&w=1200",
                next: "ending_check"
            },
            ignore: {
                name: "ハル",
                text: "「……そうね。深入りすると、この海の底に引きずり込まれるかもしれないものね」",
                image: "https://images.unsplash.com/photo-1509248961158-e54f6934749c?auto=format&fit=crop&q=80&w=400",
                next: "ending_check"
            },
            ending_check: {
                name: "???",
                text: "背後に、誰かの気配を感じた。磯辺の海は、すべてを飲み込もうとしている。（デモ版終了）",
                image: "https://images.unsplash.com/photo-1509248961158-e54f6934749c?auto=format&fit=crop&q=80&w=400",
                next: "start"
            }
        };

        const App = () => {
            const [sceneId, setSceneId] = useState('start');
            const scene = SCENARIO[sceneId];

            const handleNext = () => {
                if (scene.next) setSceneId(scene.next);
            };

            return (
                <div className="relative w-full h-screen flex items-center justify-center bg-black">
                    {/* 背景画像 */}
                    <img 
                        src={scene.image} 
                        className="absolute w-full h-full object-cover opacity-50 fade-in" 
                        key={sceneId}
                    />
                    
                    {/* メッセージウィンドウ */}
                    <div className="absolute bottom-10 w-11/12 max-w-4xl bg-black/80 border border-blue-900 p-6 rounded-lg fade-in" onClick={!scene.choices ? handleNext : undefined}>
                        {scene.name && <div className="text-blue-400 font-bold mb-2 text-sm">【{scene.name}】</div>}
                        <div className="text-lg leading-relaxed">{scene.text}</div>
                        
                        {!scene.choices && (
                            <div className="text-right text-xs text-blue-500 mt-4 animate-pulse">▼ クリックで進む</div>
                        )}

                        {/* 選択肢 */}
                        {scene.choices && (
                            <div className="mt-6 flex flex-col gap-3">
                                {scene.choices.map((c, i) => (
                                    <button 
                                        key={i}
                                        onClick={() => setSceneId(c.next)}
                                        className="choice-btn w-full p-3 rounded text-left pl-6"
                                    >
                                        {c.text}
                                    </button>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
